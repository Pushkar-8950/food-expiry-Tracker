import sqlite3
DB_NAME = "food_tracker.db"

def create_table():
    conn = sqlite3.connect(DB_NAME)
    c = conn.cursor()
    c.execute('''
        CREATE TABLE IF NOT EXISTS food_items (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            quantity INTEGER NOT NULL,
            expiry_date TEXT NOT NULL
        )
    ''')
    conn.commit()
    conn.close()

def add_item(name, quantity, expiry_date):
    conn = sqlite3.connect(DB_NAME)
    c = conn.cursor()
    c.execute('INSERT INTO food_items (name, quantity, expiry_date) VALUES (?, ?, ?)',
              (name, quantity, expiry_date))
    conn.commit()
    conn.close()

def get_items():
    conn = sqlite3.connect(DB_NAME)
    c = conn.cursor()
    c.execute('SELECT id, name, quantity, expiry_date FROM food_items')
    rows = c.fetchall()
    conn.close()
    return rows

def delete_item(item_id):
    conn = sqlite3.connect(DB_NAME)
    c = conn.cursor()
    c.execute('DELETE FROM food_items WHERE id=?', (item_id,))
    conn.commit()
    conn.close()
